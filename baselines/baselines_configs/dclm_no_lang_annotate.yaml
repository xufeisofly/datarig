- source: cc
  steps:
    - func: move_url_modifier   # Necessary because 'url' was not set up in these jsonls, was in page['metadata']['WARC-Target-URI']
    - func: url_substring_filter
      banlist_from_fname: baselines/mappers/banlists/refinedweb_banned_domains_curated.txt
      exact_domain_match: True
      ignore_chars: ['www']
      annotate: True
      token: "1"
    - func: url_substring_filter
      banlist_from_fname: baselines/mappers/banlists/refinedweb_banned_words_strict_reverse_engineered.txt
      ignore_chars: ['-', '.']
      annotate: True
      token: "2"	  
    - func: url_substring_filter
      banlist_from_fname: baselines/mappers/banlists/refinedweb_banned_words_hard_reverse_engineered.txt
      match_substrings: False
      annotate: True
      token: "3"  
    - func: url_substring_filter
      banlist_from_fname: baselines/mappers/banlists/refinedweb_banned_words_soft_reverse_engineered.txt
      num_banned_substrs: 2
      match_substrings: False
      annotate: True
      token: "4"	  
    - func: url_removal_modifier
      annotate: True
    - func: newline_removal_modifier         
      max_consecutive: 2
      annotate: True
    - func: page_length_filter
      length_type: word
      min_length: 50
      max_length: 100000
      ignore_punctuation: True
      annotate: True
    - func: word_length_filter
      min_length: 3
      max_length: 10
      annotate: True
    - func: symbol_ratio_filter
      max_symbol_to_word_ratio: 0.1
      annotate: True
    - func: bullet_count_filter
      max_bullet_start_ratio: 0.9
      annotate: True
    - func: ellipsis_count_filter
      max_ellipsis_end_ratio: 0.3
      annotate: True
    - func: alphabetic_word_ratio_filter 
      max_ratio: 0.2
      annotate: True
    - func: stop_word_filter  
      count_unique: False                   
      min_stop_word: 2
      annotate: True
    - func: massive_web_repetition_filters
      tokenizer: "fasttext"
      annotate: True
    - func: word_counter_enricher
      key: previous_word_count
      annotate: True
    - func: uppercase_ratio_line_modifier
      max_ratio: 0.5
      annotate: True
    - func: numeric_ratio_line_modifier    
      max_ratio: 0.999999
      annotate: True
    - func: counter_line_modifier
      annotate: True
    - func: line_length_modifier
      min_length: 2
      annotate: True
    - func: substring_line_modifier        
      max_length: 10 
      banlist: "items in cart"
      remove_substring_only: True
      annotate: True
      token: "1"
    - func: substring_line_modifier
      max_length: 10
      banlist: "Read more..."
      location: suffix
      remove_substring_only: True
      annotate: True
      token: "2"	  
    - func: substring_line_modifier
      max_length: 10
      banlist: "Sign-in"
      location: prefix
      remove_substring_only: True
      annotate: True
      token: "3"	  
    - func: word_removal_ratio_filter
      prev_word_count_key: previous_word_count
      max_removed_ratio: 0.05
      annotate: True